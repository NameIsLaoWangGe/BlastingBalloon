!function(){"use strict";class Levels extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.LevelsNode=this,this.gameControl=this.self.scene.GameControl}adaptive(){switch(this.Levels.value.length){case 1:this.guan.x=64;break;case 2:default:this.guan.x=72}}onDisable(){}}var Clicks,Enum,Animation,Advertising,PalyAudio,Adaptive,WXDataManager;!function(Clicks){Clicks.clicksOn=function(effect,audioUrl,target,caller,down,move,up,out){let btnEffect;switch(Clicks.audioUrl=audioUrl,effect){case"largen":btnEffect=new Btn_LargenEffect;break;case"balloon":btnEffect=new Btn_Balloon;break;default:btnEffect=new Btn_LargenEffect}target.on(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.on(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.on(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.on(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)},Clicks.clicksOff=function(effect,target,caller,down,move,up,out){let btnEffect;switch(effect){case"largen":btnEffect=new Btn_LargenEffect;break;case"balloon":btnEffect=new Btn_Balloon}target.off(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.off(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.off(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.off(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)}}(Clicks||(Clicks={}));class Btn_LargenEffect{constructor(){}down(event){event.currentTarget.scale(1.1,1.1),Laya.SoundManager.playSound(Clicks.audioUrl,1,Laya.Handler.create(this,function(){}))}up(event){event.currentTarget.scale(1,1)}move(event){event.currentTarget.scale(1,1)}out(event){event.currentTarget.scale(1,1)}}class Btn_Balloon{constructor(){}down(event){event.currentTarget.scale(Clicks.balloonScale+.06,Clicks.balloonScale+.06),Laya.SoundManager.playSound(Clicks.audioUrl,1,Laya.Handler.create(this,function(){}))}up(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}move(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}out(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}}class Props extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.Porps=this,this.gameControl=this.self.scene.GameControl,this.clicksOnBtn()}clicksOnBtn(){Clicks.clicksOn("largen","音效/按钮点击.mp3",this.self,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.self,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),this.gameControl.createHint()}onDisable(){}}!function(Enum){let ColorSkin,ColorName,IconSkin_01,IconSkin_02;!function(ColorSkin){ColorSkin[ColorSkin["UI/balloon_淡黄.png"]=0]="UI/balloon_淡黄.png",ColorSkin[ColorSkin["UI/balloon_粉色.png"]=1]="UI/balloon_粉色.png",ColorSkin[ColorSkin["UI/balloon_黄色.png"]=2]="UI/balloon_黄色.png",ColorSkin[ColorSkin["UI/balloon_青色.png"]=3]="UI/balloon_青色.png",ColorSkin[ColorSkin["UI/balloon_紫色.png"]=4]="UI/balloon_紫色.png"}(ColorSkin=Enum.ColorSkin||(Enum.ColorSkin={})),function(ColorName){ColorName[ColorName.yellowish=0]="yellowish",ColorName[ColorName.pink=1]="pink",ColorName[ColorName.yellow=2]="yellow",ColorName[ColorName.cyan=3]="cyan",ColorName[ColorName.purple=4]="purple"}(ColorName=Enum.ColorName||(Enum.ColorName={})),function(IconSkin_01){IconSkin_01[IconSkin_01["UI/icon_淡黄.png"]=0]="UI/icon_淡黄.png",IconSkin_01[IconSkin_01["UI/icon_粉色.png"]=1]="UI/icon_粉色.png",IconSkin_01[IconSkin_01["UI/icon_黄色.png"]=2]="UI/icon_黄色.png",IconSkin_01[IconSkin_01["UI/icon_青色.png"]=3]="UI/icon_青色.png",IconSkin_01[IconSkin_01["UI/icon_紫色.png"]=4]="UI/icon_紫色.png"}(IconSkin_01=Enum.IconSkin_01||(Enum.IconSkin_01={})),function(IconSkin_02){IconSkin_02[IconSkin_02["UI/icon_淡黄_pitch.png"]=0]="UI/icon_淡黄_pitch.png",IconSkin_02[IconSkin_02["UI/icon_粉色_pitch.png"]=1]="UI/icon_粉色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_黄色_pitch.png"]=2]="UI/icon_黄色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_青色_pitch.png"]=3]="UI/icon_青色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_紫色_pitch.png"]=4]="UI/icon_紫色_pitch.png"}(IconSkin_02=Enum.IconSkin_02||(Enum.IconSkin_02={}))}(Enum||(Enum={})),function(Animation){Animation.upDown_Rotate=function(node,time,func){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)}),0)}),0)},Animation.leftRight_Rotate=function(node,time,func){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){}),0),null!==func&&func()}),0)}),0)}),0)},Animation.leftRight_Shake=function(node,time,range,delayed,func){Laya.Tween.to(node,{x:node.x-range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:node.x+2*range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:node.x-range},time,null,Laya.Handler.create(this,function(){null!==func&&func()}))}))}),delayed)},Animation.upDwon_Shake=function(node,time,range,func){Laya.Tween.to(node,{y:node.y+range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{y:node.y-2*range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{y:node.y+range},time,null,Laya.Handler.create(this,function(){null!==func&&func()}))}))}))},Animation.fade_out=function(node,alhpa1,alhpa2,time,delayed,func){node.alpha=alhpa1,Laya.Tween.to(node,{alpha:alhpa2},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.fade_out_Move=function(node,time,range,x,y,delayed,func){Laya.Tween.to(node,{alpha:range,x:x,y:y},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.drop=function(node,targetY,rotation,time,delayed,func){Laya.Tween.to(node,{y:targetY,rotation:rotation},time,Laya.Ease.expoIn,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.go_up=function(node,initialY,initialR,targetY,time,delayed,func){node.y=initialY,node.rotation=initialR,Laya.Tween.to(node,{y:targetY,rotation:0},time,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.cardRotateX_TowFace=function(node,arr,func1,time,delayed,func2){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=0)}null!==func1&&func1(),Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},1*time/2,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=1)}null!==func2&&func2()}),0)}),0)}),0)}),delayed)},Animation.cardRotateX_OneFace=function(node,func1,time,delayed,func2){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){null!==func1&&func1(),Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){null!==func2&&func2()}),0)}),delayed)},Animation.cardRotateY_TowFace=function(node,arr,func1,time,delayed,func2){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=0)}null!==func1&&func1(),Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},1*time/2,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=1)}null!==func2&&func2()}),0)}),0)}),0)}),delayed)},Animation.cardRotateY_OneFace=function(node,func1,time,delayed,func2){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){null!==func1&&func1(),Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){null!==func2&&func2()}),0)}),delayed)},Animation.move_changeRotate=function(node,targetX,targetY,per,rotation_pe,time,func){let targetPerX=targetX*per+node.x*(1-per),targetPerY=targetY*per+node.y*(1-per);Laya.Tween.to(node,{x:targetPerX,y:targetPerY,rotation:45},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:targetX,y:targetY,rotation:0},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)},Animation.bombs_Appear=function(node,firstAlpha,firstScale,scale1,rotation,time1,time2,delayed,func){node.scale(0,0),node.alhpa=firstAlpha,Laya.Tween.to(node,{scaleX:scale1,scaleY:scale1,alhpa:1,rotation:rotation},time1,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale,scaleY:firstScale,rotation:0},time2,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale+.2*(scale1-firstScale),scaleY:firstScale+.2*(scale1-firstScale),rotation:0},time2,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale,scaleY:firstScale,rotation:0},time2,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)}),0)}),delayed)},Animation.bombs_Vanish=function(node,scale,alpha,rotation,time,delayed,func){Laya.Tween.to(node,{scaleX:scale,scaleY:scale,alhpa:alpha,rotation:rotation},time,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.swell_shrink=function(node,firstScale,scale1,time,delayed,func){Laya.Tween.to(node,{scaleX:scale1,scaleY:scale1,alhpa:1},time,Laya.Ease.cubicInOut,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale,scaleY:firstScale,rotation:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale+.5*(scale1-firstScale),scaleY:firstScale+.5*(scale1-firstScale),rotation:0},.5*time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:firstScale,scaleY:firstScale,rotation:0},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)}),0)}),delayed)},Animation.simple_Move=function(node,firstX,firstY,targetX,targetY,time,delayed,func){node.x=firstX,node.y=firstY,Laya.Tween.to(node,{x:targetX,y:targetY},time,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.deform_Move=function(node,firstX,targetX,scaleX,scaleY,time,delayed,func){node.x=firstX,Laya.Tween.to(node,{x:targetX,scaleX:scaleX,scaleY:scaleY},time,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1,scaleY:1},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),delayed)}}(Animation||(Animation={})),function(Advertising){Advertising.wx=Laya.Browser.window.wx,Advertising.videoAd_01_Lode=function(func_yes,func_no){Laya.Browser.onMiniGame&&(console.log("广告开始加载"),Advertising.videoAd_01=Advertising.wx.createRewardedVideoAd({adUnitId:"adunit-6de18c6de7b6d9ab"}),Advertising.videoAd_01.onLoad(()=>{console.log("激励视频 广告加载成功")}),Advertising.videoAd_01.onError(err=>{console.log(err)}),Advertising.videoAd_01.onClose(res=>{res&&res.isEnded||void 0===res?func_yes():(console.log("视频没有看望不会开始游戏"),func_no())}))},Advertising.bannerAd_01_Lode=function(){Laya.Browser.onMiniGame&&(console.log("广告开始加载"),Advertising.bannarAd_01=Advertising.wx.createBannerAd({adUnitId:"adunit-5329937f4349b0ea",adIntervals:30,style:{left:0,top:0,width:750}}),Advertising.bannarAd_01.onLoad(()=>{console.log("banner 广告加载成功")}),Advertising.bannarAd_01.onError(err=>{console.log(err)}))}}(Advertising||(Advertising={}));class GameControl extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameControl=this,this.noStart(),this.createStartGame(),this.adaptive(),Advertising.videoAd_01_Lode(f=>this.watchAdsFunc("yes"),f=>this.watchAdsFunc("no")),Advertising.bannerAd_01_Lode()}watchAdsFunc(type){"yes"===type?this.propNum.value=(Number(this.propNum.value)+1).toString():console.log("广告没有看完不给与奖励"),this.timeSwicth=!0}adaptive(){let stageH=Laya.stage.height;this.self.height=stageH,this.Background.height=stageH,this.Tip.y=.171*stageH,this.BalloonVessel.y=.266*stageH,this.BalloonVessel.height=.697*stageH;let parentBoard=this.BalloonVessel.getChildByName("parentBoard");parentBoard.height=.697*stageH,this.BalloonParent.height=parentBoard.height-100,this.Grass.y=stageH}levelsNodeAdaptive(){let guan=this.LevelsNode.getChildByName("guan");console.log(Number(this.Levels.value)),Number(this.Levels.value)>=10?(console.log(Number(this.Levels.value)),guan.x=72):guan.x=64}noStart(){this.Tip.alpha=0,this.BalloonVessel.alpha=0}start(){this.Tip.alpha=1,this.BalloonVessel.alpha=1,this.time.value=1,this.Levels.value=(Number(this.Levels.value)+1).toString(),this.levelsNodeAdaptive(),this.row=3,this.line=4,this.spacing=5,this.colorCategory=3,this.openingAnimation()}createStartGame(){let startGame=Laya.Pool.getItemByCreateFun("startGame",this.startGame.create,this.startGame);this.self.addChild(startGame)}openingAnimation(){let parentBoard=this.BalloonVessel.getChildByName("parentBoard");Animation.bombs_Appear(parentBoard,0,1,1.05,0,300,100,250,f=>{this.createBalloonCollection()});let tipboard=this.Tip.getChildByName("tipboard");Animation.bombs_Appear(tipboard,0,1,1.2,0,300,100,500,null),Animation.bombs_Appear(this.TimeNode,0,1,1.2,0,300,100,750,null),Animation.bombs_Appear(this.PropsNode,0,1,1.2,0,300,100,1e3,null),Animation.bombs_Appear(this.LevelsNode,0,1,1.2,0,300,100,1250,null),this.taskTipShake(1500)}taskTipShake(delayed){let plug_01=this.Tip.getChildByName("plug_01");Animation.deform_Move(plug_01,1550,555,.85,1.15,200,delayed,null);let plug_02=this.Tip.getChildByName("plug_02");Animation.deform_Move(plug_02,-800,171,.85,1.15,200,delayed,fun=>{Animation.leftRight_Shake(this.Tip,60,15,100,null),Animation.leftRight_Shake(this.PropsNode,60,15,160,null),Animation.leftRight_Shake(this.LevelsNode,60,15,160,null)})}leaveAnimation(){let parentBoard=this.BalloonVessel.getChildByName("parentBoard");Animation.bombs_Vanish(parentBoard,0,0,0,300,250,f=>{});let tipboard=this.Tip.getChildByName("tipboard");Animation.bombs_Vanish(tipboard,0,0,0,300,500,null),Animation.bombs_Vanish(this.TimeNode,0,0,0,300,500,null),Animation.bombs_Vanish(this.PropsNode,0,0,0,300,500,null),Animation.bombs_Vanish(this.LevelsNode,0,0,0,300,500,null);let plug_01=this.Tip.getChildByName("plug_01"),firstX_01=plug_01.x;Animation.deform_Move(plug_01,firstX_01,1550,.85,1.15,800,750,null);let plug_02=this.Tip.getChildByName("plug_02"),firstX_02=plug_02.x;Animation.deform_Move(plug_02,firstX_02,-800,.85,1.15,800,750,null),this.createStartGame(),this.clearAllBallon("startGame")}createBalloonCollection(){let widthP=this.BalloonParent.width,heightP=this.BalloonParent.height,delayed=0;for(let i=0;i<this.row;i++)for(let j=0;j<this.line;j++){delayed+=100;let x=widthP/this.row*(i+1)-widthP/(2*this.row),y=heightP/this.line*(j+1)-heightP/(2*this.line),balloon=this.createBallon(x,y),scale=(widthP/this.row-2*this.spacing)/balloon.width;balloon.scale(scale,scale),Clicks.balloonScale=scale,Animation.bombs_Appear(balloon,0,scale,scale+.1,0,200,100,delayed,f=>{i===this.row-1&&j===this.line-1&&this.TaskBalloonParentSet()})}}moveToNextLevel(){Animation.bombs_Vanish(this.LevelsNode,0,0,0,100,250,f=>{this.Levels.value=(Number(this.Levels.value)+1).toString(),Animation.bombs_Appear(this.LevelsNode,0,1,1.1,0,300,100,250,f=>{})}),Animation.bombs_Vanish(this.TimeNode,0,0,0,300,500,f=>{this.time.value=1,Animation.bombs_Appear(this.TimeNode,0,1,1.1,0,300,100,250,f=>{this.taskTipShake(0)})}),this.clearAllBallon("restartAndNextLevel")}againCurrentlevel(){Animation.swell_shrink(this.LevelsNode,1,1.3,100,0,f=>{Animation.swell_shrink(this.LevelsNode,1,1.3,100,0,f=>{})}),Animation.bombs_Vanish(this.TimeNode,0,0,0,200,500,f=>{this.time.value=1,Animation.bombs_Appear(this.TimeNode,0,1,1.1,0,200,100,1250,f=>{this.taskTipShake(0)})}),this.clearAllBallon("restartAndNextLevel")}clearAllBallon(type){let delayed=0,len=this.BalloonParent._children.length;if(0!==len)for(let index=0;index<len;index++){const element=this.BalloonParent._children[index];Animation.bombs_Vanish(element,0,0,0,100,delayed,f=>{index===len-1&&(this.clearAllTaskBallon(type),this.BalloonParent.removeChildren(0,len-1))}),delayed+=80}else this.clearAllTaskBallon(type)}clearAllTaskBallon(type){let delayed=0,len=this.TaskBalloonParent._children.length;for(let index=0;index<len;index++){const element=this.TaskBalloonParent._children[index];Animation.bombs_Vanish(element,0,0,0,150,delayed,f=>{element.removeSelf(),index===len-1&&("restartAndNextLevel"===type?this.createBalloonCollection():"startGame"===type&&console.log("类型是返回主界面的清除"))}),delayed+=100}}createBallon(x,y){let balloon=Laya.Pool.getItemByCreateFun("balloon",this.balloon.create,this.balloon);this.BalloonParent.addChild(balloon),balloon.pos(x,y);let img=balloon.Balloon.img,random=Math.floor(Math.random()*this.colorCategory);return img.skin=Enum.ColorSkin[random],balloon.name=Enum.ColorName[random],balloon}TaskBalloonParentSet(){let arr1=[];for(let i=0;i<this.BalloonParent._children.length;i++){const balloon=this.BalloonParent._children[i];arr1.push(balloon.name)}let arr2=Array.from(new Set(arr1)),len=arr2.length,widthP=75*len;this.TaskBalloonParent.width=widthP;let delayed,heightP=this.TaskBalloonParent.height;for(let j=0;j<len;j++){delayed=50*j;let colorSkin,name=arr2[j],x=widthP/len*(j+1)-widthP/(2*len),y=heightP/2;colorSkin=0===j?Enum.IconSkin_02[Enum.ColorName[name]]:Enum.IconSkin_01[Enum.ColorName[name]];let ballon_Icon=this.createBallon_Icon(x,y,colorSkin,name);Animation.bombs_Appear(ballon_Icon,0,1,1.1,0,200,200,delayed,f=>{j===len-1&&(this.balloonCount(),this.balloonClickOrder(),this.clicksAllOn(),this.timeSwicth=!0)})}this.TaskBalloonParent.pivotX=this.TaskBalloonParent.width/2,this.TaskBalloonParent.x=375}balloonClickOrder(){for(let i=0;i<this.TaskBalloonParent._children.length;i++){const taskBallon=this.TaskBalloonParent._children[i],name=taskBallon.name;let img=taskBallon.Balloon_Icon.img;name===this.clickOrderArr[0]?(Animation.swell_shrink(taskBallon,1.1,1.3,50,0,f=>{}),img.skin=Enum.IconSkin_02[Enum.ColorName[name]]):(taskBallon.scale(1,1),img.skin=Enum.IconSkin_01[Enum.ColorName[name]])}}balloonCount(){this.clickOrderArr=[];for(let j=0;j<this.TaskBalloonParent._children.length;j++){let taskBallon=this.TaskBalloonParent._children[j],taskName=taskBallon.name;for(let i=0;i<this.BalloonParent._children.length;i++){let name=this.BalloonParent._children[i].name;if(taskName===name){let num=taskBallon.Balloon_Icon.num;num.value=(Number(num.value)+1).toString(),this.clickOrderArr.push(name)}}}}createBallon_Icon(x,y,colorSkin,name){let balloon_icon=Laya.Pool.getItemByCreateFun("balloon_icon",this.balloon_icon.create,this.balloon_icon);return this.TaskBalloonParent.addChild(balloon_icon),balloon_icon.pos(x,y),balloon_icon.Balloon_Icon.img.skin=colorSkin,balloon_icon.name=name,balloon_icon}clicksAllOn(){for(let index=0;index<this.BalloonParent._children.length;index++){this.BalloonParent._children[index].Balloon.balloonClicksOn(),console.log("开启所有气球的点击事件")}}clicksAllOff(){for(let index=0;index<this.BalloonParent._children.length;index++){this.BalloonParent._children[index].Balloon.balloonClicksOff()}}createGameOver(type){let gameOver=Laya.Pool.getItemByCreateFun("gameOver",this.gameOver.create,this.gameOver);this.self.addChild(gameOver),gameOver.GameOver.gameOverType(type),this.clicksAllOff(),this.timeSwicth=!1}createRanking(){let ranking=Laya.Pool.getItemByCreateFun("ranking",this.ranking.create,this.ranking);this.self.addChild(ranking)}createHint(){let hint=Laya.Pool.getItemByCreateFun("hint",this.hint.create,this.hint);this.self.addChild(hint),this.timeSwicth=!1}onUpdate(){this.timeSwicth&&(this.time.value>0?this.time.value-=.001:this.time.value<=0&&(this.createGameOver("defeated"),this.timeSwicth=!1))}onDisable(){}}class Balloon extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.gameControl=this.self.scene.GameControl,this.self.Balloon=this}clickRight(){this.self.removeSelf(),this.gameControl.clickOrderArr.length>0&&this.gameControl.clickOrderArr.shift(),this.gameControl.balloonClickOrder(),0===this.gameControl.clickOrderArr.length&&this.gameControl.createGameOver("victory")}clickError(){this.gameControl.createGameOver("defeated")}balloonClicksOn(){Clicks.clicksOn("balloon","音效/按钮点击.mp3",this.self,this,null,null,this.up,null)}balloonClicksOff(){Clicks.clicksOff("balloon",this.self,this,null,null,this.up,null)}up(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale),this.self.name===this.gameControl.clickOrderArr[0]?(console.log("点击正确1"),this.clickRight()):(this.clickError(),console.log("点击错误！"))}onDisable(){}onUpdate(){}}class Balloon_Icon extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.gameControl=this.self.scene.GameControl,this.self.Balloon_Icon=this}onDisable(){}onUpdate(){}}!function(PalyAudio){PalyAudio.aAingleCard=function(number){Laya.SoundManager.playSound("音效/单张发牌.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.groupUp=function(number){Laya.SoundManager.playSound("音效/连续发牌.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.groupDrop=function(number){Laya.SoundManager.playSound("音效/全体下落.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.cardRotate=function(number){Laya.SoundManager.playSound("音效/单张牌旋转.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.gameOver=function(number){Laya.SoundManager.playSound("音效/结束.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.clickRight=function(number){Laya.SoundManager.playSound("音效/点击正确.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.clickError=function(number){Laya.SoundManager.playSound("音效/点击错误.mp3",number,Laya.Handler.create(this,function(){}))}}(PalyAudio||(PalyAudio={})),function(Adaptive){Adaptive.interface_Center=function(self){self.width=750,self.pivotX=self.width/2,self.pivotY=self.height/2,self.pos(375,Laya.stage.height/2)},Adaptive.child_Center=function(child,parent,location){child.y=location-(Laya.stage.height/2-parent.height/2)},Adaptive.background_Center=function(background,parent){background.y=background.y-(Laya.stage.height/2-parent.height/2),background.width=Laya.stage.width,background.height=Laya.stage.height}}(Adaptive||(Adaptive={}));class GameOver extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOver=this,this.gameControl=this.self.scene.GameControl,this.Levels=this.gameControl.Levels,this.line=this.gameControl.line,this.logoSwitch=!1,this.logoChange="appear",Adaptive.interface_Center(this.self),Adaptive.background_Center(this.background,this.self)}gameOverType(type){"victory"===type?(this.btn_again.loadImage("UI/下一关按钮.png"),this.settlementType="victory",this.logo.loadImage("UI/闯关成功logo.png"),PalyAudio.gameOver(1)):"defeated"===type&&(this.btn_again.loadImage("UI/重来按钮.png"),this.settlementType="defeated",this.logo.loadImage("UI/闯关失败logo.png"),PalyAudio.gameOver(1)),this.scoreNode.getChildByName("score").value=this.Levels.value,this.appaer()}appaer(){PalyAudio.aAingleCard(3),Animation.fade_out(this.background,0,.8,200,0,null),Animation.bombs_Appear(this.scoreNode,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,0,null),Animation.bombs_Appear(this.logo,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,200,null),Animation.bombs_Appear(this.btn_again,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,400,null),Animation.bombs_Appear(this.btn_return,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,600,func=>{this.appearFunc()})}appearFunc(){this.clicksOnBtn(),Laya.Browser.onMiniGame&&Advertising.bannarAd_01.show().then(()=>console.log("banner 广告显示"))}vanish(type){Animation.fade_out(this.background,.8,0,250,400,null),Animation.bombs_Vanish(this.scoreNode,0,0,1===Math.floor(2*Math.random())?5:-5,250,0,null),Animation.bombs_Vanish(this.logo,0,0,1===Math.floor(2*Math.random())?5:-5,250,100,null),Animation.bombs_Vanish(this.btn_again,0,0,1===Math.floor(2*Math.random())?5:-5,250,200,null),Animation.bombs_Vanish(this.btn_return,0,0,1===Math.floor(2*Math.random())?5:-5,250,300,f=>{this.vanishFunc(type)})}vanishFunc(type){Laya.Browser.onMiniGame&&Advertising.bannarAd_01.hide(),"return"===type?this.gameControl.leaveAnimation():"victory"===this.settlementType?this.gameControl.moveToNextLevel():"defeated"===this.settlementType&&this.gameControl.againCurrentlevel(),this.self.removeSelf()}clicksOnBtn(){Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_again,this,null,null,this.up,null),Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_return,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.btn_again,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_return,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),this.clicksOffBtn(),"btn_again"===event.currentTarget.name?this.vanish("again"):"btn_return"===event.currentTarget.name&&this.vanish("return")}onUpdate(){this.logoSwitch&&("appear"===this.logoChange?(this.logo.alpha-=.01,this.logo.alpha<.3&&(this.logoChange="vanish")):"vanish"===this.logoChange&&(this.logo.alpha+=.01,this.logo.alpha>=1&&(this.logoChange="appear")))}onDisable(){}}class Hint extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.Hint=this,this.gameControl=this.self.scene.GameControl,this.appaer()}appaer(){PalyAudio.aAingleCard(3),Animation.fade_out(this.background,0,.8,200,0,null),Animation.bombs_Appear(this.hintBox,0,1,1.1,1===Math.floor(2*Math.random())?5:-5,250,80,0,null),Animation.bombs_Appear(this.btn_not,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,80,200,null),Animation.bombs_Appear(this.btn_watch,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,80,400,f=>{this.appaerFunc()})}appaerFunc(){this.clicksOnBtn()}vanish(){Animation.fade_out(this.background,.8,0,250,600,null),Animation.bombs_Vanish(this.btn_watch,0,0,1===Math.floor(2*Math.random())?5:-5,250,150,null),Animation.bombs_Vanish(this.btn_not,0,0,1===Math.floor(2*Math.random())?5:-5,250,300,null),Animation.bombs_Vanish(this.hintBox,0,0,1===Math.floor(2*Math.random())?5:-5,250,450,f=>{this.vanishFunc()})}vanishFunc(){this.gameControl.timeSwicth=!0,this.self.removeSelf()}clicksOnBtn(){Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_not,this,null,null,this.up,null),Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_watch,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.btn_not,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_watch,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),"btn_watch"===event.currentTarget.name&&Laya.Browser.onMiniGame&&Advertising.videoAd_01.show().then(()=>console.log("banner 广告显示")),this.clicksOffBtn(),this.vanish()}onDisable(){}}class Ranking extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,Adaptive.background_Center(this.background,this.self),Adaptive.interface_Center(this.self),this.appear()}onAwake(){if(console.log("排行榜"),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"ranking"})}}appear(){Animation.fade_out(this.background,0,.3,300,0,null),Animation.fade_out(this.baseboard,0,1,300,0,func=>this.clicksOnBtn())}vanish(){Animation.fade_out(this.background,.3,0,300,0,func=>this.vanishFunc()),Animation.fade_out(this.baseboard,1,0,300,0,null)}vanishFunc(){if(this.self.removeSelf(),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"close"})}}clicksOnBtn(){Clicks.clicksOn("largen","音效/按钮点击.mp3",this.background,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.background,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),this.vanish(),console.log("我点击了背景！")}onDisable(){}}!function(WXDataManager){function authorizedWXLogin(){Laya.Browser.onMiniGame&&WXDataManager.wx.login({success:function(res){res.code&&console.log("登录成功，获取到code",res.code);var button=WXDataManager.wx.createUserInfoButton({type:"text",text:"开始游戏",style:{left:WXDataManager.wx.getSystemInfoSync().screenWidth/2-60,bottom:WXDataManager.wx.getSystemInfoSync().screenHeight/2-60,width:120,height:40,lineHeight:40,backgroundColor:"#fb94a9",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:20}});button.show(),button.onTap(res=>{console.log(res),"getUserInfo:ok"===res.errMsg?(console.log("已经授权"),button.destroy(),getUserinfo(null)):console.log("没有授权")})}})}function getUserinfo(type){Laya.Browser.onMiniGame&&(WXDataManager.wx.cloud.init({env:"release-lwg"}),WXDataManager.wx.cloud.callFunction({name:"login"}).then(res=>{if(console.log("登录成功回调：",res),WXDataManager.WXopenid=res.result.openid,console.log("WXopenid为：",WXDataManager.WXopenid),WXDataManager.user_id=WXDataManager.WXopenid,"loginAgain"===type)try{add_Levels()}catch(error){console.log(error)}else if("haveLogin"===type)try{get_Levels()}catch(error){console.log(error)}}))}function add_Levels(){if(Laya.Browser.onMiniGame){WXDataManager.wx.cloud.init({env:"release-lwg"});let db=WXDataManager.wx.cloud.database();db.collection("user_info").add({data:{_id:WXDataManager.user_id,_levels:WXDataManager._thislevels,due:new Date("2018-09-01"),location:new db.Geo.Point(113,23),done:!1}}).then(res=>{console.log("没有登录过重新上传："+res)})}}function get_Levels(){if(Laya.Browser.onMiniGame){WXDataManager.wx.cloud.init({env:"release-lwg"}),WXDataManager.wx.cloud.database().collection("user_info").doc(WXDataManager.user_id).get().then(res=>{console.log(res.data),WXDataManager._lastlevels=res.data._levels,console.log("上次的关卡数为："+WXDataManager._lastlevels),WXDataManager._thislevels=WXDataManager._lastlevels})}}WXDataManager._thislevels=0,WXDataManager.wx=Laya.Browser.window.wx,WXDataManager.WXcheckSession=function(){Laya.Browser.onMiniGame&&WXDataManager.wx.checkSession({success(){console.log("已经登录过了！")},fail(){authorizedWXLogin(),console.log("重新登录")}})},WXDataManager.authorizedWXLogin=authorizedWXLogin,WXDataManager.normalWXLogin=function(){Laya.Browser.onMiniGame&&WXDataManager.wx.checkSession({success(){console.log("已经登录过了！"),getUserinfo("haveLogin")},fail(){console.log("重新登录"),WXDataManager.wx.login({success(res){getUserinfo("loginAgain")},fail(){console.log("登录失败")}})}})},WXDataManager.getUserinfo=getUserinfo,WXDataManager.add_Levels=add_Levels,WXDataManager.get_Levels=get_Levels,WXDataManager.update_Levels=function(){Laya.Browser.onMiniGame&&(WXDataManager.wx.cloud.init({env:"release-lwg"}),WXDataManager.wx.cloud.database().collection("user_info").doc(WXDataManager.user_id).update({data:{_levels:WXDataManager._thislevels}}).then(res=>{console.log(res)}))},WXDataManager.wxPostInit=function(){Laya.Browser.onMiniGame&&Laya.loader.load(["res/atlas/rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/rank.atlas"),Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"init"})}))},WXDataManager.wxPostData=function(score){if(Laya.Browser.onMiniGame){let args={type:"scores",data:{scores:score}};Laya.Browser.window.wx.getOpenDataContext().postMessage(args),console.log("上传了")}else console.log("没有上传")},WXDataManager.wxShare=function(){Laya.Browser.onMiniGame?(Laya.Browser.window.wx.shareAppMessage({title:"你的手速够快吗？",imageUrlId:"CRYATpcgSFGkeB4Hs75jOQ",imageUrl:"https://mmocgame.qpic.cn/wechatgame/9zdKibmXJ3RsmFpXn6UAV4ScT8ulA4wzqUUNicKWDIaODZbuv38lkBBOBQv8XbxOI0/0"}),console.log("主动进行了转发")):console.log("仅支持微信客户端")}}(WXDataManager||(WXDataManager={}));class StartGame extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.GameControl,this.LevelsNode=this.gameControl.LevelsNode,this.gameControl.startNode=this.self,this.startSwitch=!1,this.watchAds=!1,Adaptive.interface_Center(this.self),Adaptive.child_Center(this.anti_addiction,this.self,9*Laya.stage.height/10),this.timer=0,this.appaer()}appaer(){for(let index=0;index<this.logo._children.length;index++){const element=this.logo._children[index];Animation.bombs_Appear(element,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,300*index,null)}Animation.bombs_Appear(this.btn_start,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,600,null),Animation.bombs_Appear(this.btn_ranking,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,900,null),Animation.bombs_Appear(this.btn_share,0,1,1.3,1===Math.floor(2*Math.random())?5:-5,250,60,1200,f=>{this.appaerFunc()}),Animation.fade_out(this.anti_addiction,0,1,1e3,0,null)}appaerFunc(){this.startSwitch=!0,this.clicksOnBtn()}vanish(){for(let index=0;index<this.logo._children.length;index++){const element=this.logo._children[index];Animation.bombs_Vanish(element,0,0,1===Math.floor(2*Math.random())?5:-5,250,100*index,null)}Animation.bombs_Vanish(this.btn_start,0,0,1===Math.floor(2*Math.random())?5:-5,250,100,f=>{Laya.Tween.clearAll(this.btn_start),this.startSwitch=!1}),Animation.bombs_Vanish(this.btn_ranking,0,0,1===Math.floor(2*Math.random())?5:-5,250,200,null),Animation.bombs_Vanish(this.btn_share,0,0,1===Math.floor(2*Math.random())?5:-5,250,300,f=>{this.vanishFunc()}),Animation.fade_out(this.anti_addiction,1,0,1e3,0,null)}vanishFunc(){this.self.removeSelf(),this.gameControl.start()}clicksOnBtn(){Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_start,this,null,null,this.up,null),Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_ranking,this,null,null,this.up,null),Clicks.clicksOn("largen","音效/按钮点击.mp3",this.btn_share,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.btn_start,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_ranking,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_share,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),"btn_start"===event.currentTarget.name?(this.vanish(),this.clicksOffBtn()):"btn_ranking"===event.currentTarget.name?this.gameControl.createRanking():"btn_share"===event.currentTarget.name&&WXDataManager.wxShare()}onUpdate(){this.startSwitch&&(this.timer++,this.timer%100==0&&Animation.swell_shrink(this.btn_start,1,1.15,120,0,null))}onDisable(){}}class GameConfig{constructor(){}static init(){var reg=Laya.ClassUtils.regClass;reg("Script/Project/LevelsNode.ts",Levels),reg("Script/Project/Props.ts",Props),reg("Script/Project/GameControl.ts",GameControl),reg("Script/Project/Balloon.ts",Balloon),reg("Script/Project/Balloon_Icon.ts",Balloon_Icon),reg("Script/Project/GameOver.ts",GameOver),reg("Script/Project/Hint.ts",Hint),reg("Script/Project/Ranking.ts",Ranking),reg("Script/Project/StartGame.ts",StartGame)}}GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="Scenes/MainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!0,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig.init();new class{constructor(){window.Laya3D?Laya3D.init(GameConfig.width,GameConfig.height):Laya.init(GameConfig.width,GameConfig.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=GameConfig.scaleMode,Laya.stage.screenMode=GameConfig.screenMode,Laya.stage.alignV=GameConfig.alignV,Laya.stage.alignH=GameConfig.alignH,Laya.URL.exportSceneToJson=GameConfig.exportSceneToJson,(GameConfig.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),GameConfig.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){GameConfig.startScene&&Laya.Scene.open(GameConfig.startScene)}}}();