!function(){"use strict";class Levels extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.LevelsNode=this,this.gameControl=this.self.scene.GameControl}adaptive(){switch(this.Levels.value.length){case 1:this.guan.x=64;break;case 2:default:this.guan.x=72}}onDisable(){}}var Enum,Clicks;!function(Enum){let ColorSkin,ColorName,IconSkin_01,IconSkin_02;!function(ColorSkin){ColorSkin[ColorSkin["UI/balloon_淡黄.png"]=0]="UI/balloon_淡黄.png",ColorSkin[ColorSkin["UI/balloon_粉色.png"]=1]="UI/balloon_粉色.png",ColorSkin[ColorSkin["UI/balloon_黄色.png"]=2]="UI/balloon_黄色.png",ColorSkin[ColorSkin["UI/balloon_青色.png"]=3]="UI/balloon_青色.png",ColorSkin[ColorSkin["UI/balloon_紫色.png"]=4]="UI/balloon_紫色.png"}(ColorSkin=Enum.ColorSkin||(Enum.ColorSkin={})),function(ColorName){ColorName[ColorName.yellowish=0]="yellowish",ColorName[ColorName.pink=1]="pink",ColorName[ColorName.yellow=2]="yellow",ColorName[ColorName.cyan=3]="cyan",ColorName[ColorName.purple=4]="purple"}(ColorName=Enum.ColorName||(Enum.ColorName={})),function(IconSkin_01){IconSkin_01[IconSkin_01["UI/icon_淡黄.png"]=0]="UI/icon_淡黄.png",IconSkin_01[IconSkin_01["UI/icon_粉色.png"]=1]="UI/icon_粉色.png",IconSkin_01[IconSkin_01["UI/icon_黄色.png"]=2]="UI/icon_黄色.png",IconSkin_01[IconSkin_01["UI/icon_青色.png"]=3]="UI/icon_青色.png",IconSkin_01[IconSkin_01["UI/icon_紫色.png"]=4]="UI/icon_紫色.png"}(IconSkin_01=Enum.IconSkin_01||(Enum.IconSkin_01={})),function(IconSkin_02){IconSkin_02[IconSkin_02["UI/icon_淡黄_pitch.png"]=0]="UI/icon_淡黄_pitch.png",IconSkin_02[IconSkin_02["UI/icon_粉色_pitch.png"]=1]="UI/icon_粉色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_黄色_pitch.png"]=2]="UI/icon_黄色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_青色_pitch.png"]=3]="UI/icon_青色_pitch.png",IconSkin_02[IconSkin_02["UI/icon_紫色_pitch.png"]=4]="UI/icon_紫色_pitch.png"}(IconSkin_02=Enum.IconSkin_02||(Enum.IconSkin_02={}))}(Enum||(Enum={})),function(Clicks){Clicks.clicksOn=function(effect,audioUrl,target,caller,down,move,up,out){let btnEffect;switch(Clicks.audioUrl=audioUrl,effect){case"largen":btnEffect=new Btn_LargenEffect;break;case"balloon":btnEffect=new Btn_Balloon;break;default:btnEffect=new Btn_LargenEffect}target.on(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.on(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.on(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.on(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)},Clicks.clicksOff=function(effect,target,caller,down,move,up,out){let btnEffect;switch(effect){case"largen":btnEffect=new Btn_LargenEffect;break;case"balloon":btnEffect=new Btn_Balloon}target.off(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.off(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.off(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.off(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)}}(Clicks||(Clicks={}));class Btn_LargenEffect{constructor(){}down(event){event.currentTarget.scale(1.1,1.1),Laya.SoundManager.playSound(Clicks.audioUrl,1,Laya.Handler.create(this,function(){}))}up(event){event.currentTarget.scale(1,1)}move(event){event.currentTarget.scale(1.1,1.1)}out(event){event.currentTarget.scale(1,1)}}class Btn_Balloon{constructor(){}down(event){event.currentTarget.scale(Clicks.balloonScale+.06,Clicks.balloonScale+.06),Laya.SoundManager.playSound(Clicks.audioUrl,1,Laya.Handler.create(this,function(){}))}up(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}move(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}out(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale)}}class GameControl extends Laya.Script{constructor(){super()}onEnable(){this.slef=this.owner,this.slef.GameControl=this,this.levelsParameter(),this.adaptive(),this.createBalloonCollection()}adaptive(){let stageH=Laya.stage.height;this.slef.height=stageH,this.Background.height=stageH,this.Tip.y=.171*stageH,this.BalloonVessel.y=.266*stageH,this.BalloonVessel.height=.697*stageH;let parentBoard=this.BalloonVessel.getChildByName("parentBoard");parentBoard.height=.697*stageH,this.BalloonParent.height=parentBoard.height-100,this.Grass.y=stageH}levelsNodeAdaptive(){let len=this.Levels.value.length,guan=this.LevelsNode.getChildByName("guan");switch(len){case 1:guan.x=64;break;case 2:default:guan.x=72}}levelsParameter(){this.Levels.value="88",this.levelsNodeAdaptive(),this.row=4,this.line=5,this.spacing=5,this.colorCategory=5}createBalloonCollection(){let widthP=this.BalloonParent.width,heightP=this.BalloonParent.height;for(let i=0;i<this.row;i++)for(let j=0;j<this.line;j++){let x=widthP/this.row*(i+1)-widthP/(2*this.row),y=heightP/this.line*(j+1)-heightP/(2*this.line),balloon=this.createBallon(x,y),scale=(widthP/this.row-2*this.spacing)/balloon.width;balloon.scale(scale,scale),Clicks.balloonScale=scale,balloon.Balloon.cardClicksOn()}this.taskPromptSet()}createBallon(x,y){let balloon=Laya.Pool.getItemByCreateFun("balloon",this.balloon.create,this.balloon);this.BalloonParent.addChild(balloon),balloon.pos(x,y);let img=balloon.Balloon.img,random=Math.floor(Math.random()*this.colorCategory);return img.skin=Enum.ColorSkin[random],balloon.name=Enum.ColorName[random],balloon}taskPromptSet(){let arr1=[];for(let i=0;i<this.BalloonParent._children.length;i++){const balloon=this.BalloonParent._children[i];arr1.push(balloon.name)}let arr2=Array.from(new Set(arr1)),len=arr2.length,widthP=75*len;this.TaskPrompt.width=widthP;let heightP=this.TaskPrompt.height;for(let j=0;j<len;j++){let name=arr2[j],x=widthP/len*(j+1)-widthP/(2*len),y=heightP/2,colorSkin=Enum.IconSkin_01[Enum.ColorName[name]];this.createBallon_Icon(x,y,colorSkin)}this.TaskPrompt.pivotX=this.TaskPrompt.width/2,this.TaskPrompt.x=375,this.balloonCount(),this.balloonClickOrder()}balloonCount(){this.clickOrderArr=[];for(let j=0;j<this.TaskPrompt._children.length;j++){let taskBallon=this.TaskPrompt._children[j],taskName=taskBallon.name;for(let i=0;i<this.BalloonParent._children.length;i++){let name=this.BalloonParent._children[i].name;if(taskName===name){let num=taskBallon.Balloon_Icon.num;num.value=(Number(num.value)+1).toString(),this.clickOrderArr.push(name)}}}}balloonClickOrder(){for(let i=0;i<this.TaskPrompt._children.length;i++){const taskBallon=this.TaskPrompt._children[i],name=taskBallon.name;let img=taskBallon.Balloon_Icon.img;name===this.clickOrderArr[0]?(taskBallon.scale(1.1,1.1),img.skin=Enum.IconSkin_02[Enum.ColorName[name]]):(taskBallon.scale(1,1),img.skin=Enum.IconSkin_01[Enum.ColorName[name]])}}createBallon_Icon(x,y,colorSkin){let balloon_icon=Laya.Pool.getItemByCreateFun("balloon_icon",this.balloon_icon.create,this.balloon_icon);return this.TaskPrompt.addChild(balloon_icon),balloon_icon.pos(x,y),balloon_icon.Balloon_Icon.img.skin=colorSkin,balloon_icon.name=Enum.ColorName[Enum.IconSkin_01[colorSkin]],balloon_icon}onDisable(){}}class Balloon extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.gameControl=this.self.scene.GameControl,this.self.Balloon=this}clickRight(){this.self.removeSelf(),this.gameControl.clickOrderArr.length>0&&this.gameControl.clickOrderArr.shift(),this.gameControl.balloonClickOrder()}clickError(){}cardClicksOn(){Clicks.clicksOn("balloon","音效/按钮点击.mp3",this.self,this,null,null,this.up,null)}cardClicksOff(){Clicks.clicksOff("balloon",this.self,this,null,null,this.up,null)}down(event){event.currentTarget.scale(Clicks.balloonScale+.1,Clicks.balloonScale+.1)}up(event){event.currentTarget.scale(Clicks.balloonScale,Clicks.balloonScale),this.self.name===this.gameControl.clickOrderArr[0]?(console.log("点击正确1"),this.clickRight()):console.log("点击错误！")}onDisable(){}onUpdate(){}}class Balloon_Icon extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.gameControl=this.self.scene.GameControl,this.self.Balloon_Icon=this}onDisable(){}onUpdate(){}}class GameConfig{constructor(){}static init(){var reg=Laya.ClassUtils.regClass;reg("Script/Project/LevelsNode.ts",Levels),reg("Script/Project/GameControl.ts",GameControl),reg("Script/Project/Balloon.ts",Balloon),reg("Script/Project/Balloon_Icon.ts",Balloon_Icon)}}GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="Scenes/MainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig.init();new class{constructor(){window.Laya3D?Laya3D.init(GameConfig.width,GameConfig.height):Laya.init(GameConfig.width,GameConfig.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=GameConfig.scaleMode,Laya.stage.screenMode=GameConfig.screenMode,Laya.stage.alignV=GameConfig.alignV,Laya.stage.alignH=GameConfig.alignH,Laya.URL.exportSceneToJson=GameConfig.exportSceneToJson,(GameConfig.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),GameConfig.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){GameConfig.startScene&&Laya.Scene.open(GameConfig.startScene)}}}();