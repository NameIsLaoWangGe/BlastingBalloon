{
  "code": "import { Clicks } from \"../Template/Clicks\";\r\nimport { Animation } from \"../Template/Animation\";\r\nimport { PalyAudio } from \"../Template/PlayAudio\";\r\nimport { Adaptive } from \"../Template/Adaptive\";\r\nimport { WXDataManager } from \"../Template/WXDataManager\";\r\nimport { Enum } from \"../Template/Enum\";\r\nexport default class StartGame extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['GameOver'] = this;\r\n        this.balloon_skeleton = this.balloon.getChildByName('balloon_skeleton');\r\n        this.gameControl = this.self.scene['GameControl'];\r\n        this.LevelsNode = this.gameControl.LevelsNode;\r\n        this.startSwitch = false;\r\n        this.startChange = 'appear';\r\n        Adaptive.interface_Center(this.self);\r\n        Adaptive.child_Center(this.anti_addiction, this.self, Laya.stage.height * 9 / 10);\r\n        this.timer = 0;\r\n        this.appaer();\r\n        this.createBoneAni();\r\n        PalyAudio.playMusic(Enum.AudioName.bgm, 0, 0);\r\n    }\r\n    createBoneAni() {\r\n        this.templet = new Laya.Templet();\r\n        this.templet.on(Laya.Event.COMPLETE, this, this.parseComplete);\r\n        this.templet.on(Laya.Event.ERROR, this, this.onError);\r\n        this.templet.loadAni(\"Skeleton/logoBallon.sk\");\r\n    }\r\n    onError() {\r\n        console.log('装饰气球加载错误！');\r\n    }\r\n    parseComplete() {\r\n        this.balloon_skeleton.play('rock', true);\r\n        console.log('装饰气球加载成功！');\r\n    }\r\n    appaer() {\r\n        let scale = 1.3;\r\n        let time1 = 250;\r\n        let time2 = 100;\r\n        let delayed = 300;\r\n        for (let index = 0; index < this.logo._children.length; index++) {\r\n            const element = this.logo._children[index];\r\n            let type = 'common';\r\n            if (index === 4) {\r\n                type = 'balloon';\r\n            }\r\n            Animation.bombs_Appear(element, 0, 1, scale, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time1, time2, delayed * index, type, null);\r\n        }\r\n        Animation.bombs_Appear(this.btn_start, 0, 1, scale, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time1, time2, delayed * 5, 'common', null);\r\n        Animation.bombs_Appear(this.btn_ranking, 0, 1, scale, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time1, time2, delayed * 6, 'common', null);\r\n        Animation.bombs_Appear(this.btn_share, 0, 1, scale, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time1, time2, delayed * 7, 'common', f => {\r\n            this.appaerFunc();\r\n        });\r\n        Animation.fade_out(this.anti_addiction, 0, 1, 1000, 0, null);\r\n    }\r\n    appaerFunc() {\r\n        this.startSwitch = true;\r\n        this.clicksOnBtn();\r\n    }\r\n    vanish() {\r\n        let time = 250;\r\n        let delayed = 100;\r\n        for (let index = 0; index < this.logo._children.length; index++) {\r\n            const element = this.logo._children[index];\r\n            Animation.bombs_Vanish(element, 0, 0, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time, delayed * index, null);\r\n        }\r\n        Animation.bombs_Vanish(this.btn_start, 0, 0, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time, delayed * 1, f => {\r\n            Laya.Tween.clearAll(this.btn_start);\r\n            this.startSwitch = false;\r\n        });\r\n        Animation.bombs_Vanish(this.btn_ranking, 0, 0, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time, delayed * 2, null);\r\n        Animation.bombs_Vanish(this.btn_share, 0, 0, Math.floor(Math.random() * 2) === 1 ? 5 : -5, time, delayed * 3, f => {\r\n            this.vanishFunc();\r\n        });\r\n        Animation.fade_out(this.anti_addiction, 1, 0, 1000, 0, null);\r\n    }\r\n    vanishFunc() {\r\n        this.self.removeSelf();\r\n        this.gameControl.readyStart('startGame');\r\n    }\r\n    clicksOnBtn() {\r\n        Clicks.clicksOn('largen', '音效/按钮点击.mp3', this.btn_start, this, null, null, this.up, null);\r\n        Clicks.clicksOn('largen', '音效/按钮点击.mp3', this.btn_ranking, this, null, null, this.up, null);\r\n        Clicks.clicksOn('largen', '音效/按钮点击.mp3', this.btn_share, this, null, null, this.up, null);\r\n    }\r\n    clicksOffBtn() {\r\n        Clicks.clicksOff('largen', this.btn_start, this, null, null, this.up, null);\r\n        Clicks.clicksOff('largen', this.btn_ranking, this, null, null, this.up, null);\r\n        Clicks.clicksOff('largen', this.btn_share, this, null, null, this.up, null);\r\n    }\r\n    up(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        if (event.currentTarget.name === 'btn_start') {\r\n            this.vanish();\r\n            this.clicksOffBtn();\r\n        }\r\n        else if (event.currentTarget.name === 'btn_ranking') {\r\n            this.gameControl.createRanking();\r\n        }\r\n        else if (event.currentTarget.name === 'btn_share') {\r\n            WXDataManager.wxShare();\r\n        }\r\n    }\r\n    onUpdate() {\r\n        if (this.startSwitch) {\r\n            if (this.startChange === 'appear') {\r\n                this.btn_start.scaleX += 0.003;\r\n                this.btn_start.scaleY += 0.003;\r\n                if (this.btn_start.scaleX > 1.05) {\r\n                    this.startChange = 'vanish';\r\n                }\r\n            }\r\n            else if (this.startChange === 'vanish') {\r\n                this.btn_start.scaleX -= 0.003;\r\n                this.btn_start.scaleY -= 0.003;\r\n                if (this.btn_start.scaleX < 1) {\r\n                    this.startChange = 'appear';\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Clicks.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Animation.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/PlayAudio.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Adaptive.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/WXDataManager.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Enum.ts"
  ]
}
