{
  "code": "import { Tools } from \"../Template/Tools\";\r\nimport { Enum } from \"../Template/Enum\";\r\nexport default class Explode extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.timer = 0;\r\n        this.accelerated = 0.1;\r\n        this.self = this.owner;\r\n        this.img = this.self.getChildByName('img');\r\n        this.self['Explode'] = this;\r\n        this.self.pivotX = this.self.width / 2;\r\n        this.self.pivotY = this.self.height / 2;\r\n    }\r\n    initProperty(type) {\r\n        this.effectsType = type;\r\n        if (this.effectsType === Enum.BalloonName[0] || this.effectsType === Enum.BalloonName[1] || this.effectsType === Enum.BalloonName[2] || this.effectsType === Enum.BalloonName[3]) {\r\n            this.explosionBalloon_P();\r\n        }\r\n        else if (type === 'vanish') {\r\n            this.vanish_P();\r\n        }\r\n        this.img.pivotX = this.img.width / 2;\r\n        this.img.pivotY = this.img.height / 2;\r\n    }\r\n    explosionBalloon_P() {\r\n        this.moveSwitch = true;\r\n        this.randomSpeed = Math.floor(Math.random() * 15) + 4;\r\n        this.initialAngle = Math.floor(Math.random() * 360);\r\n        this.scale = Math.floor(Math.random() * 8) + 4;\r\n        this.self.scaleX = this.scale / 10;\r\n        this.self.scaleY = this.scale / 10;\r\n        this.vinshTime = Math.floor(Math.random() * 5) + 2;\r\n        this.startAlpha = 1;\r\n        this.self.alpha = this.startAlpha;\r\n        this.rotationD = Math.floor(Math.random() * 2) === 1 ? -10 : 10;\r\n        let number = Math.floor(Math.random() * 4);\r\n        switch (this.effectsType) {\r\n            case Enum.BalloonName[0]:\r\n                this.img.skin = Enum.Explode_Yellowish[number];\r\n                break;\r\n            case Enum.BalloonName[1]:\r\n                this.img.skin = Enum.Explode_Pink[number];\r\n                break;\r\n            case Enum.BalloonName[2]:\r\n                this.img.skin = Enum.Explode_Yellow[number];\r\n                break;\r\n            case Enum.BalloonName[3]:\r\n                this.img.skin = Enum.Explode_Cyan[number];\r\n                break;\r\n            case Enum.BalloonName[4]:\r\n                this.img.skin = Enum.Explode_Purple[number];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    explosionBalloon_Move() {\r\n        this.img.rotation += this.rotationD;\r\n        this.accelerated += 0.1;\r\n        if (this.timer > 0 && this.timer <= 15) {\r\n            this.commonSpeedXYByAngle(this.initialAngle, this.randomSpeed + 5);\r\n        }\r\n        else if (this.timer > 15 && this.timer < 18) {\r\n            this.commonSpeedXYByAngle(this.initialAngle, this.randomSpeed - 5);\r\n        }\r\n        else if (this.timer >= 18) {\r\n            this.self.removeSelf();\r\n        }\r\n    }\r\n    vanish_P() {\r\n        this.moveSwitch = true;\r\n        this.randomSpeed = Math.random() * 2 + 2;\r\n        this.initialAngle = Math.floor(Math.random() * 360);\r\n        this.scale = 7;\r\n        this.self.scale(this.scale / 10, this.scale / 10);\r\n        this.vinshTime = Math.floor(Math.random() * 5) + 2;\r\n        this.startAlpha = (Math.floor(Math.random() * 6) + 4) / 10;\r\n        this.self.alpha = this.startAlpha;\r\n        this.rotationD = Math.floor(Math.random() * 2) === 1 ? -5 : 5;\r\n        this.img.skin = '特效/白色单元.png';\r\n        this.img.rotation = this.initialAngle - 90;\r\n    }\r\n    vanish_Move() {\r\n        this.accelerated += 0.01;\r\n        if (this.timer > 0 && this.timer <= 20) {\r\n            this.commonSpeedXYByAngle(this.initialAngle, this.randomSpeed);\r\n        }\r\n        else if (this.timer > 20 && this.timer < 30) {\r\n            this.commonSpeedXYByAngle(this.initialAngle, this.randomSpeed - 3);\r\n        }\r\n        else if (this.timer >= 30) {\r\n            this.self.alpha -= 0.02;\r\n            if (this.self.alpha <= 0) {\r\n                this.self.removeSelf();\r\n            }\r\n        }\r\n    }\r\n    move() {\r\n        if (this.effectsType === Enum.BalloonName[0] || this.effectsType === Enum.BalloonName[1] || this.effectsType === Enum.BalloonName[2] || this.effectsType === Enum.BalloonName[3]) {\r\n            this.explosionBalloon_Move();\r\n        }\r\n        else if (this.effectsType === 'vanish') {\r\n            this.vanish_Move();\r\n        }\r\n    }\r\n    commonSpeedXYByAngle(angle, speed) {\r\n        this.self.x += Tools.speedXYByAngle(angle, speed + this.accelerated).x;\r\n        this.self.y += Tools.speedXYByAngle(angle, speed + this.accelerated).y;\r\n    }\r\n    onUpdate() {\r\n        if (this.moveSwitch) {\r\n            this.timer += 1;\r\n            this.move();\r\n        }\r\n    }\r\n    onDisable() {\r\n        Laya.Pool.recover('explode', this.self);\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Tools.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Enum.ts"
  ]
}
