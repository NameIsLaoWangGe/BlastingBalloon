{
  "code": "import { Clicks } from \"../Template/Clicks\";\r\nimport { Animation } from \"../Template/Animation\";\r\nexport default class Props extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['Porps'] = this;\r\n        this.gameControl = this.self.scene['GameControl'];\r\n        this.prop_skeleton = this.self.getChildByName('prop_skeleton');\r\n        this.beetleParent = this.gameControl.beetleParent;\r\n        this.clicksOnBtn();\r\n        this.createBoneAni();\r\n    }\r\n    createBoneAni() {\r\n        this.templet = new Laya.Templet();\r\n        this.templet.on(Laya.Event.COMPLETE, this, this.parseComplete);\r\n        this.templet.on(Laya.Event.ERROR, this, this.onError);\r\n        this.templet.loadAni(\"Skeleton/trumpet.sk\");\r\n    }\r\n    onError() {\r\n        console.log('小喇叭骨骼动画加载错误！');\r\n    }\r\n    parseComplete() {\r\n        console.log('小喇叭骨骼动画加载成功！');\r\n        this.playSkeletonAni(1, 'static');\r\n    }\r\n    playSkeletonAni(speed, type) {\r\n        this.prop_skeleton.play(type, true);\r\n        this.prop_skeleton.rotation = 0;\r\n        this.prop_skeleton.playbackRate(speed);\r\n    }\r\n    eliminateBeetle() {\r\n        let len = this.beetleParent._children.length;\r\n        if (len === 0) {\r\n            console.log('没有小甲虫');\r\n        }\r\n        else {\r\n            let beetle = this.beetleParent._children[0];\r\n            beetle['Beetle'].playSkeletonAni(1, 'death');\r\n            beetle['Beetle'].clicksOffBtn();\r\n            Animation.drop(beetle, beetle.y + 1600, 0, 1000, 0, f => {\r\n                beetle.removeSelf();\r\n            });\r\n        }\r\n    }\r\n    prorAttack() {\r\n        let delay = 0;\r\n        for (let l = 0; l < 6; l++) {\r\n            delay += 75;\r\n            Laya.timer.once(delay, this, function () {\r\n                let bullet = Laya.Pool.getItemByCreateFun('bullet', this.bullet.create, this.bullet);\r\n                this.self.addChild(bullet);\r\n                bullet.x = 25;\r\n                bullet.y = 60;\r\n                bullet['Bullet'].line = l;\r\n                bullet['Bullet'].moveSwitch = true;\r\n            });\r\n        }\r\n    }\r\n    clicksOnBtn() {\r\n        Clicks.clicksOn('largen', '音效/按钮点击.mp3', this.self, this, null, null, this.up, null);\r\n    }\r\n    clicksOffBtn() {\r\n        Clicks.clicksOff('largen', this.self, this, null, null, this.up, null);\r\n    }\r\n    up(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        let number = Number(this.propNum.value.substring(1, 3));\r\n        console.log(number);\r\n        if (number > 0) {\r\n            this.prop_skeleton.play('attack', false);\r\n            this.prop_skeleton.playbackRate(3);\r\n            this.propNum.value = 'x' + (number - 1).toString();\r\n            this.eliminateBeetle();\r\n            this.clicksOffBtn();\r\n            Animation.leftRight_Shake(this.gameControl.BalloonVessel, 20, 50, 100, f => {\r\n                this.clicksOnBtn();\r\n            });\r\n            this.prorAttack();\r\n        }\r\n        else {\r\n            this.gameControl.createHint();\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Clicks.ts",
    "F:/Work/Game/03_BlastingBalloon/project/BlastingBalloon/src/Script/Template/Animation.ts"
  ]
}
